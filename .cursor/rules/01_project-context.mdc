# Project Context & Architecture

**Version**: 1.0  
**Last Updated**: December 7, 2025

---

## Project Overview

This is the **Chartered Accountants Office Suite** - a modern, scalable office management platform designed specifically for Chartered Accountants and tax professionals. The suite centralizes all core operations—clients, compliance tasks, filings, documents, billing, workflows, and analytics—into a unified digital workspace.

**Key Documents:**
- Requirements: `docs/Requirements.md`
- UI Requirements: `docs/Portal-React-UI-Requirements.md`
- Main README: `README.md`

---

## Architecture Overview

The application follows a **Backend For Frontend (BFF) pattern** with API Gateway orchestration:

```text
┌─────────────────────────────────────────────────────────┐
│         Backend For Frontend (BFF) - .NET Aspire         │
│  ┌──────────────────────────────────────────────────┐  │
│  │  React.js Frontend (Hosted in BFF)               │  │
│  │  src/CAOfficeSuite.Web/                          │  │
│  │  User Interface & Client Logic                     │  │
│  └──────────────────┬───────────────────────────────┘  │
│                      │                                    │
│  ┌──────────────────┴───────────────────────────────┐  │
│  │  API Gateway (Inside Aspire)                       │  │
│  │  Service Orchestration & Routing                   │  │
│  └──────┬──────────────┬──────────────┬──────────────┘  │
│         │              │              │                  │
└─────────┼──────────────┼──────────────┼──────────────────┘
          │              │              │
┌─────────▼──────┐ ┌─────▼──────┐ ┌─────▼────────┐
│  Python        │ │  Python    │ │  Work       │
│  FastAPI       │ │  FastAPI    │ │  Processes  │
│  Services      │ │  Services  │ │  (Workflows)│
│  (Primary)       │ │  (Analytics)│ │             │
└─────────┬──────┘ └─────┬──────┘ └─────┬────────┘
          │                │              │
┌─────────┴────────────────┴──────────────┴──────┐
│         PostgreSQL Database                     │
│      + Document Storage System                  │
│      + Redis Cache                               │
└──────────────────────────────────────────────────┘
```

**Key Architecture Decisions:**
- **BFF Pattern**: React.js frontend is hosted inside the .NET Aspire BFF
- **API Gateway**: Centralized routing and orchestration within Aspire
- **Python FastAPI**: Primary backend services (preferred technology)
- **Work Processes**: Workflow engine for business process automation
- **Heavy Dashboards**: Advanced analytics and visualization services

---

## Current Project Status

### Phase: Frontend Development (In Progress)

**Current Implementation:**
- ✅ React 19 + TypeScript 5 frontend application
- ✅ Vite 7 build tool
- ✅ React Router 7 for navigation
- ✅ Font Awesome icons
- ✅ Advanced DataGrid component with column management
- ✅ Layout components (Navbar, Footer, Layout)
- ✅ Core pages (Home, Login, Clients, Tasks, Help)
- ✅ Authentication context (mock implementation)
- ✅ Mock data services
- ✅ Vitest testing setup

**Project Location:**
- Frontend: `src/CAOfficeSuite.Web/`

**Technology Stack (Current):**

**Frontend:**
- React 19.2.0
- TypeScript 5.9.3
- Vite 7.2.4
- React Router 7.9.6
- Font Awesome 7.1.0
- **UI Components** - Advanced Data Grid with column management, pagination, sorting, and filtering
- Vitest 4.0.13 (testing)
- ESLint 9.39.1

**Backend Architecture (Planned):**
- **.NET Aspire** - Cloud-native application framework
  - BFF (Backend For Frontend) - Hosts React.js frontend
  - API Gateway - Service orchestration and routing
- **Python FastAPI** - Primary backend services (preferred)
  - Business logic services
  - Analytics and dashboard services
  - Data processing services
- **Work Processes** - Workflow engine for business process automation
- **PostgreSQL** - Primary relational database
- **Redis** - Caching, session management, and real-time data
- **Document Storage** - Secure file storage system (Azure Blob / AWS S3 / Local)
- **Heavy Dashboards** - Advanced analytics, visualization, and reporting services

---

## Project Structure

```
ca-office-suite/
├── src/
│   └── CAOfficeSuite.Web/          # React frontend application
│       ├── src/
│       │   ├── components/
│       │   │   ├── common/          # Reusable components (DataGrid, ColumnManager)
│       │   │   └── layout/         # Layout components (Navbar, Footer, Layout)
│       │   ├── pages/              # Page components (Home, Login, Clients, Tasks, Help)
│       │   ├── services/           # API service layer (currently mock data)
│       │   ├── store/              # State management (AuthContext)
│       │   ├── types/              # TypeScript type definitions
│       │   └── test/               # Test files
│       ├── public/
│       ├── package.json
│       ├── vite.config.ts
│       └── tsconfig.json
│
├── docs/                            # Documentation
│   ├── Requirements.md
│   ├── Portal-React-UI-Requirements.md
│   └── images/
│
├── .cursor/                         # Cursor IDE rules and guidelines
│   └── rules/                       # Cursor AI coding rules
│
├── tools/                           # Development tools
├── tests/                           # Integration tests (future)
├── LICENSE
└── README.md                        # Main project documentation
```

---

## Key Features (Current & Planned)

### 1. Client Control & Engagement ✅ (Frontend Ready)
- Client list with DataGrid (sorting, filtering, pagination, column management)
- Client search and filtering
- Client detail view (planned)

### 2. Task & Compliance Management ✅ (Frontend Ready)
- Task list with DataGrid
- Task filtering by status, type, priority
- Task assignment and tracking (planned)

### 3. Authentication ✅ (Mock Implementation)
- Login page
- Auth context for state management
- Protected routes (planned)

### 4. DataGrid Component ✅
- Advanced column management (show/hide, reorder)
- Sorting, filtering, pagination
- LocalStorage persistence
- Responsive design

### 5. Layout & Navigation ✅
- Sticky navbar with navigation
- Sticky footer
- Responsive layout

---

## Development Principles

- **React Best Practices**: Use functional components, hooks, and modern React patterns
- **TypeScript First**: Strong typing throughout the codebase
- **Component Reusability**: Build reusable, composable components
- **Accessibility**: Follow WCAG guidelines where possible
- **Responsive Design**: Mobile-first approach
- **Testing**: Write tests for critical components and functionality
- **Code Quality**: Use ESLint, follow consistent code style
- **Documentation**: Keep code and documentation in sync

---

## Current Development Focus

1. **Frontend Completion**: Finish remaining UI components and pages
2. **BFF Development**: Implement .NET Aspire BFF to host React frontend
3. **API Gateway**: Set up API Gateway within Aspire for service orchestration
4. **Python FastAPI Services**: Develop primary backend services using FastAPI
5. **Work Processes**: Implement workflow engine for business process automation
6. **Heavy Dashboards**: Build advanced analytics and visualization dashboards
7. **Backend Integration**: Connect frontend to BFF and API Gateway
8. **State Management**: Enhance state management as needed
9. **Testing**: Expand test coverage across all layers

---

## Getting Started

### Prerequisites
- Node.js 18.x or higher
- npm or yarn

### Development Setup

```bash
# Navigate to frontend directory
cd src/CAOfficeSuite.Web

# Install dependencies
npm install

# Run development server
npm run dev

# Run tests
npm test

# Build for production
npm run build
```

---

## Notes

- Currently using **mock data** for development
- Backend services are **planned** but not yet implemented
- The project structure may evolve as backend services are added
- All frontend code is in `src/CAOfficeSuite.Web/`
